.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "PERLWIN32 1"
.TH PERLWIN32 1 "2006-01-07" "perl v5.8.8" "Perl Programmers Reference Guide"
.SH "NAME"
perlwin32 \- Perl under Windows
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
These are instructions for building Perl under Windows 9x/NT/2000/XP
on the Intel x86 and Itanium architectures.
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
Before you start, you should glance through the \s-1README\s0 file
found in the top-level directory to which the Perl distribution
was extracted.  Make sure you read and understand the terms under
which this software is being distributed.
.PP
Also make sure you read \*(L"\s-1BUGS\s0 \s-1AND\s0 \s-1CAVEATS\s0\*(R" below for the
known limitations of this port.
.PP
The \s-1INSTALL\s0 file in the perl top-level has much information that is
only relevant to people building Perl on Unix-like systems.  In
particular, you can safely ignore any information that talks about
\&\*(L"Configure\*(R".
.PP
You may also want to look at two other options for building
a perl that will work on Windows \s-1NT:\s0  the \s-1README\s0.cygwin and
\&\s-1README\s0.os2 files, each of which give a different set of rules to
build a Perl that will work on Win32 platforms.  Those two methods
will probably enable you to build a more Unix-compatible perl, but
you will also need to download and use various other build-time and
run-time support software described in those files.
.PP
This set of instructions is meant to describe a so-called \*(L"native\*(R"
port of Perl to Win32 platforms.  This includes both 32\-bit and
64\-bit Windows operating systems.  The resulting Perl requires no
additional software to run (other than what came with your operating
system).  Currently, this port is capable of using one of the
following compilers on the Intel x86 architecture:
.PP
.Vb 3
\&      Borland C++           version 5.02 or later
\&      Microsoft Visual C++  version 2.0 or later
\&      MinGW with gcc        gcc version 2.95.2 or later
.Ve
.PP
The last of these is a high quality freeware compiler.  Use version
3.2.x or later for the best results with this compiler.
.PP
The Borland \*(C+ and Microsoft Visual \*(C+ compilers are also now being given
away free.  The Borland compiler is available as \*(L"Borland \*(C+ Compiler Free
Command Line Tools\*(R" and is the same compiler that ships with the full
\&\*(L"Borland \*(C+ Builder\*(R" product.  The Microsoft compiler is available as
\&\*(L"Visual \*(C+ Toolkit 2003\*(R", and also as part of the \*(L".NET Framework \s-1SDK\s0\*(R", and
is the same compiler that ships with \*(L"Visual Studio .NET 2003 Professional\*(R".
.PP
This port can also be built on the Intel \s-1IA64\s0 using:
.PP
.Vb 1
\&      Microsoft Platform SDK    Nov 2001 (64-bit compiler and tools)
.Ve
.PP
The \s-1MS\s0 Platform \s-1SDK\s0 can be downloaded from http://www.microsoft.com/.
.PP
This port fully supports MakeMaker (the set of modules that
is used to build extensions to perl).  Therefore, you should be
able to build and install most extensions found in the \s-1CPAN\s0 sites.
See \*(L"Usage Hints for Perl on Win32\*(R" below for general hints about this.
.Sh "Setting Up Perl on Win32"
.IX Subsection "Setting Up Perl on Win32"
.IP "Make" 4
.IX Item "Make"
You need a \*(L"make\*(R" program to build the sources.  If you are using
Visual \*(C+ or the Platform \s-1SDK\s0 tools under Windows \s-1NT/2000/XP\s0, nmake
will work.  All other builds need dmake.
.Sp
dmake is a freely available make that has very nice macro features
and parallelability.
.Sp
A port of dmake for Windows is available from:
.Sp
.Vb 1
\&    http://search.cpan.org/dist/dmake/
.Ve
.Sp
Fetch and install dmake somewhere on your path.
.Sp
There exists a minor coexistence problem with dmake and Borland \*(C+
compilers.  Namely, if a distribution has C files named with mixed
case letters, they will be compiled into appropriate .obj\-files named
with all lowercase letters, and every time dmake is invoked
to bring files up to date, it will try to recompile such files again.
For example, Tk distribution has a lot of such files, resulting in
needless recompiles every time dmake is invoked.  To avoid this, you
may use the script \*(L"sync_ext.pl\*(R" after a successful build.  It is
available in the win32 subdirectory of the Perl source distribution.
.IP "Command Shell" 4
.IX Item "Command Shell"
Use the default \*(L"cmd\*(R" shell that comes with \s-1NT\s0.  Some versions of the
popular 4DOS/NT shell have incompatibilities that may cause you trouble.
If the build fails under that shell, try building again with the cmd
shell.
.Sp
The nmake Makefile also has known incompatibilities with the
\&\*(L"command.com\*(R" shell that comes with Windows 9x.  You will need to
use dmake and makefile.mk to build under Windows 9x.
.Sp
The surest way to build it is on Windows \s-1NT/2000/XP\s0, using the cmd shell.
.Sp
Make sure the path to the build directory does not contain spaces.  The
build usually works in this circumstance, but some tests will fail.
.IP "Borland \*(C+" 4
.IX Item "Borland "
If you are using the Borland compiler, you will need dmake.
(The make that Borland supplies is seriously crippled and will not
work for MakeMaker builds.)
.Sp
See \*(L"Make\*(R" above.
.IP "Microsoft Visual \*(C+" 4
.IX Item "Microsoft Visual "
The nmake that comes with Visual \*(C+ will suffice for building.
You will need to run the \s-1VCVARS32\s0.BAT file, usually found somewhere
like C:\eMSDEV4.2\eBIN or C:\eProgram Files\eMicrosoft Visual Studio\eVC98\eBin.
This will set your build environment.
.Sp
You can also use dmake to build using Visual \*(C+; provided, however,
you set \s-1OSRELEASE\s0 to \*(L"microsft\*(R" (or whatever the directory name
under which the Visual C dmake configuration lives) in your environment
and edit win32/config.vc to change \*(L"make=nmake\*(R" into \*(L"make=dmake\*(R".  The
latter step is only essential if you want to use dmake as your default
make for building extensions using MakeMaker.
.IP "Microsoft Visual \*(C+ Toolkit 2003" 4
.IX Item "Microsoft Visual  Toolkit 2003"
This free toolkit contains the same compiler and linker that ship with
Visual Studio .NET 2003 Professional, but doesn't contain everything
necessary to build Perl.
.Sp
You will also need to download the \*(L"Platform \s-1SDK\s0\*(R" (the \*(L"Core \s-1SDK\s0\*(R" and \*(L"\s-1MDAC\s0
\&\s-1SDK\s0\*(R" components are required) for header files, libraries and rc.exe, and
\&\*(L".NET Framework \s-1SDK\s0\*(R" for more libraries and nmake.exe.  Note that the latter
(which also includes the free compiler and linker) requires the \*(L".NET
Framework Redistributable\*(R" to be installed first.  This can be downloaded and
installed separately, but is included in the \*(L"Visual \*(C+ Toolkit 2003\*(R" anyway.
.Sp
These packages can all be downloaded by searching in the Download Center at
http://www.microsoft.com/downloads/search.aspx?displaylang=en.  (Providing exact
links to these packages has proven a pointless task because the links keep on
changing so often.)
.Sp
Try to obtain the latest version of the Platform \s-1SDK\s0.  Sometimes these packages
contain a particular Windows \s-1OS\s0 version in their name, but actually work on
other \s-1OS\s0 versions too.  For example, the \*(L"Windows Server 2003 \s-1SP1\s0 Platform \s-1SDK\s0\*(R"
also runs on Windows \s-1XP\s0 \s-1SP2\s0 and Windows 2000.
.Sp
According to the download pages the Toolkit and the .NET Framework \s-1SDK\s0 are only
supported on Windows 2000/XP/2003, so trying to use these tools on Windows
95/98/ME and even Windows \s-1NT\s0 probably won't work.
.Sp
Install the Toolkit first, then the Platform \s-1SDK\s0, then the .NET Framework \s-1SDK\s0.
Setup your environment as follows (assuming default installation locations
were chosen):
.Sp
.Vb 3
\&        SET PATH=%SystemRoot%\esystem32;%SystemRoot%;C:\eProgram Files\eMicrosoft Visual C++ Toolkit 2003\ebin;C:\eProgram Files\eMicrosoft SDK\eBin;C:\eProgram Files\eMicrosoft.NET\eSDK\ev1.1\eBin
\&        SET INCLUDE=C:\eProgram Files\eMicrosoft Visual C++ Toolkit 2003\einclude;C:\eProgram Files\eMicrosoft SDK\einclude;C:\eProgram Files\eMicrosoft Visual Studio .NET 2003\eVc7\einclude
\&        SET LIB=C:\eProgram Files\eMicrosoft Visual C++ Toolkit 2003\elib;C:\eProgram Files\eMicrosoft SDK\elib;C:\eProgram Files\eMicrosoft Visual Studio .NET 2003\eVc7\elib
.Ve
.Sp
Several required files will still be missing:
.RS 4
.IP "*" 4
cvtres.exe is required by link.exe when using a .res file.  It is actually
installed by the .NET Framework \s-1SDK\s0, but into a location such as the
following:
.Sp
.Vb 1
\&        C:\eWINDOWS\eMicrosoft.NET\eFramework\ev1.1.4322
.Ve
.Sp
Copy it from there to C:\eProgram Files\eMicrosoft SDK\eBin
.IP "*" 4
lib.exe is normally used to build libraries, but link.exe with the /lib
option also works, so change win32/config.vc to use it instead:
.Sp
Change the line reading:
.Sp
.Vb 1
\&        ar='lib'
.Ve
.Sp
to:
.Sp
.Vb 1
\&        ar='link /lib'
.Ve
.Sp
It may also be useful to create a batch file called lib.bat in
C:\eProgram Files\eMicrosoft Visual \*(C+ Toolkit 2003\ebin containing:
.Sp
.Vb 2
\&        @echo off
\&        link /lib %*
.Ve
.Sp
for the benefit of any naughty C extension modules that you might want to build
later which explicitly reference \*(L"lib\*(R" rather than taking their value from
\&\f(CW$Config\fR{ar}.
.IP "*" 4
setargv.obj is required to build perlglob.exe (and perl.exe if the \s-1USE_SETARGV\s0
option is enabled).  The Platform \s-1SDK\s0 supplies this object file in source form
in C:\eProgram Files\eMicrosoft SDK\esrc\ecrt.  Copy setargv.c, cruntime.h and
internal.h from there to some temporary location and build setargv.obj using
.Sp
.Vb 1
\&        cl.exe /c /I. /D_CRTBLD setargv.c
.Ve
.Sp
Then copy setargv.obj to C:\eProgram Files\eMicrosoft SDK\elib
.Sp
Alternatively, if you don't need perlglob.exe and don't need to enable the
\&\s-1USE_SETARGV\s0 option then you can safely just remove all mention of $(\s-1GLOBEXE\s0)
from win32/Makefile and setargv.obj won't be required anyway.
.RE
.RS 4
.Sp
Perl should now build using the win32/Makefile.  You will need to edit that
file to set
.Sp
.Vb 1
\&        CCTYPE = MSVC70FREE
.Ve
.Sp
and to set \s-1CCHOME\s0, \s-1CCINCDIR\s0 and \s-1CCLIBDIR\s0 as per the environment setup above.
.RE
.IP "Microsoft Platform \s-1SDK\s0 64\-bit Compiler" 4
.IX Item "Microsoft Platform SDK 64-bit Compiler"
The nmake that comes with the Platform \s-1SDK\s0 will suffice for building
Perl.  Make sure you are building within one of the \*(L"Build Environment\*(R"
shells available after you install the Platform \s-1SDK\s0 from the Start Menu.
.IP "MinGW release 3 with gcc" 4
.IX Item "MinGW release 3 with gcc"
The latest release of MinGW at the time of writing is 3.1.0, which contains
gcc\-3.2.3.  It can be downloaded here:
.Sp
.Vb 1
\&    http://www.mingw.org/
.Ve
.Sp
Perl also compiles with earlier releases of gcc (2.95.2 and up).  See below
for notes about using earlier versions of MinGW/gcc.
.Sp
You also need dmake.  See \*(L"Make\*(R" above on how to get it.
.IP "MinGW release 1 with gcc" 4
.IX Item "MinGW release 1 with gcc"
The MinGW\-1.1 bundle contains gcc\-2.95.3.
.Sp
Make sure you install the binaries that work with \s-1MSVCRT\s0.DLL as indicated
in the \s-1README\s0 for the \s-1GCC\s0 bundle.  You may need to set up a few environment
variables (usually ran from a batch file).
.Sp
There are a couple of problems with the version of gcc\-2.95.2\-msvcrt.exe
released 7 November 1999:
.RS 4
.IP "*" 4
It left out a fix for certain command line quotes.  To fix this, be sure
to download and install the file fixes/quote\-fix\-msvcrt.exe from the above
ftp location.
.IP "*" 4
The definition of the fpos_t type in stdio.h may be wrong.  If your
stdio.h has this problem, you will see an exception when running the
test t/lib/io_xs.t.  To fix this, change the typedef for fpos_t from
\&\*(L"long\*(R" to \*(L"long long\*(R" in the file i386\-mingw32msvc/include/stdio.h,
and rebuild.
.RE
.RS 4
.Sp
A potentially simpler to install (but probably soon\-to\-be\-outdated) bundle
of the above package with the mentioned fixes already applied is available
here:
.Sp
.Vb 2
\&    http://downloads.ActiveState.com/pub/staff/gsar/gcc-2.95.2-msvcrt.zip
\&    ftp://ftp.ActiveState.com/pub/staff/gsar/gcc-2.95.2-msvcrt.zip
.Ve
.RE
.Sh "Building"
.IX Subsection "Building"
.IP "\(bu" 4
Make sure you are in the \*(L"win32\*(R" subdirectory under the perl toplevel.
This directory contains a \*(L"Makefile\*(R" that will work with
versions of nmake that come with Visual \*(C+ or the Platform \s-1SDK\s0, and
a dmake \*(L"makefile.mk\*(R" that will work for all supported compilers.  The
defaults in the dmake makefile are setup to build using MinGW/gcc.
.IP "\(bu" 4
Edit the makefile.mk (or Makefile, if you're using nmake) and change
the values of \s-1INST_DRV\s0 and \s-1INST_TOP\s0.   You can also enable various
build flags.  These are explained in the makefiles.
.Sp
Note that it is generally not a good idea to try to build a perl with
\&\s-1INST_DRV\s0 and \s-1INST_TOP\s0 set to a path that already exists from a previous
build.  In particular, this may cause problems with the
lib/ExtUtils/t/Embed.t test, which attempts to build a test program and
may end up building against the installed perl's lib/CORE directory rather
than the one being tested.
.Sp
You will have to make sure that \s-1CCTYPE\s0 is set correctly and that
\&\s-1CCHOME\s0 points to wherever you installed your compiler.
.Sp
The default value for \s-1CCHOME\s0 in the makefiles for Visual \*(C+
may not be correct for some versions.  Make sure the default exists
and is valid.
.Sp
You may also need to comment out the \f(CW\*(C`DELAYLOAD = ...\*(C'\fR line in the
Makefile if you're using \s-1VC++\s0 6.0 without the latest service pack and
the linker reports an internal error.
.Sp
If you have either the source or a library that contains \fIdes_fcrypt()\fR,
enable the appropriate option in the makefile.  A ready-to-use version
of fcrypt.c, based on the version originally written by Eric Young at
ftp://ftp.funet.fi/pub/crypt/mirrors/dsi/libdes/, is bundled with the
distribution and \s-1CRYPT_SRC\s0 is set to use it.
Alternatively, if you have built a library that contains \fIdes_fcrypt()\fR,
you can set \s-1CRYPT_LIB\s0 to point to the library name.
Perl will also build without \fIdes_fcrypt()\fR, but the \fIcrypt()\fR builtin will
fail at run time.
.Sp
If you want build some core extensions statically into perl's dll, specify
them in the \s-1STATIC_EXT\s0 macro.
.Sp
Be sure to read the instructions near the top of the makefiles carefully.
.IP "\(bu" 4
Type \*(L"dmake\*(R" (or \*(L"nmake\*(R" if you are using that make).
.Sp
This should build everything.  Specifically, it will create perl.exe,
perl58.dll at the perl toplevel, and various other extension dll's
under the lib\eauto directory.  If the build fails for any reason, make
sure you have done the previous steps correctly.
.Sh "Testing Perl on Win32"
.IX Subsection "Testing Perl on Win32"
Type \*(L"dmake test\*(R" (or \*(L"nmake test\*(R").  This will run most of the tests from
the testsuite (many tests will be skipped).
.PP
There should be no test failures when running under Windows \s-1NT/2000/XP\s0.
Many tests \fIwill\fR fail under Windows 9x due to the inferior command shell.
.PP
Some test failures may occur if you use a command shell other than the
native \*(L"cmd.exe\*(R", or if you are building from a path that contains
spaces.  So don't do that.
.PP
If you are running the tests from a emacs shell window, you may see
failures in op/stat.t.  Run \*(L"dmake test\-notty\*(R" in that case.
.PP
If you're using the Borland compiler, you may see a failure in op/taint.t
arising from the inability to find the Borland Runtime DLLs on the system
default path.  You will need to copy the DLLs reported by the messages
from where Borland chose to install it, into the Windows system directory
(usually somewhere like C:\eWINNT\eSYSTEM32) and rerun the test.
.PP
If you're using Borland compiler versions 5.2 and below, you may run into
problems finding the correct header files when building extensions.  For
example, building the \*(L"Tk\*(R" extension may fail because both perl and Tk
contain a header file called \*(L"patchlevel.h\*(R".  The latest Borland compiler
(v5.5) is free of this misbehaviour, and it even supports an
option \-VI\- for backward (bugward) compatibility for using the old Borland
search algorithm  to locate header files.
.PP
If you run the tests on a \s-1FAT\s0 partition, you may see some failures for
\&\f(CW\*(C`link()\*(C'\fR related tests:
.PP
.Vb 1
\&    Failed Test                     Stat Wstat Total Fail  Failed  List
.Ve
.PP
.Vb 8
\&    ../ext/IO/lib/IO/t/io_dup.t                    6    4  66.67%  2-5
\&    ../lib/File/Temp/t/mktemp.t                    9    1  11.11%  2
\&    ../lib/File/Temp/t/posix.t                     7    1  14.29%  3
\&    ../lib/File/Temp/t/security.t                 13    1   7.69%  2
\&    ../lib/File/Temp/t/tempfile.t                 20    2  10.00%  2 4
\&    comp/multiline.t                               6    2  33.33%  5-6
\&    io/dup.t                                       8    6  75.00%  2-7
\&    op/write.t                                    47    7  14.89%  1-3 6 9-11
.Ve
.PP
Testing on \s-1NTFS\s0 avoids these errors.
.PP
Furthermore, you should make sure that during \f(CW\*(C`make test\*(C'\fR you do not
have any \s-1GNU\s0 tool packages in your path: some toolkits like Unixutils
include some tools (\f(CW\*(C`type\*(C'\fR for instance) which override the Windows
ones and makes tests fail. Remove them from your path while testing to
avoid these errors.
.PP
Please report any other failures as described under \*(L"\s-1BUGS\s0 \s-1AND\s0 \s-1CAVEATS\s0\*(R".
.Sh "Installation of Perl on Win32"
.IX Subsection "Installation of Perl on Win32"
Type \*(L"dmake install\*(R" (or \*(L"nmake install\*(R").  This will put the newly
built perl and the libraries under whatever \f(CW\*(C`INST_TOP\*(C'\fR points to in the
Makefile.  It will also install the pod documentation under
\&\f(CW\*(C`$INST_TOP\e$INST_VER\elib\epod\*(C'\fR and \s-1HTML\s0 versions of the same under
\&\f(CW\*(C`$INST_TOP\e$INST_VER\elib\epod\ehtml\*(C'\fR.
.PP
To use the Perl you just installed you will need to add a new entry to
your \s-1PATH\s0 environment variable: \f(CW\*(C`$INST_TOP\ebin\*(C'\fR, e.g.
.PP
.Vb 1
\&    set PATH=c:\eperl\ebin;%PATH%
.Ve
.PP
If you opted to uncomment \f(CW\*(C`INST_VER\*(C'\fR and \f(CW\*(C`INST_ARCH\*(C'\fR in the makefile
then the installation structure is a little more complicated and you will
need to add two new \s-1PATH\s0 components instead: \f(CW\*(C`$INST_TOP\e$INST_VER\ebin\*(C'\fR and
\&\f(CW\*(C`$INST_TOP\e$INST_VER\ebin\e$ARCHNAME\*(C'\fR, e.g.
.PP
.Vb 1
\&    set PATH=c:\eperl\e5.6.0\ebin;c:\eperl\e5.6.0\ebin\eMSWin32-x86;%PATH%
.Ve
.Sh "Usage Hints for Perl on Win32"
.IX Subsection "Usage Hints for Perl on Win32"
.IP "Environment Variables" 4
.IX Item "Environment Variables"
The installation paths that you set during the build get compiled
into perl, so you don't have to do anything additional to start
using that perl (except add its location to your \s-1PATH\s0 variable).
.Sp
If you put extensions in unusual places, you can set \s-1PERL5LIB\s0
to a list of paths separated by semicolons where you want perl
to look for libraries.  Look for descriptions of other environment
variables you can set in perlrun.
.Sp
You can also control the shell that perl uses to run \fIsystem()\fR and
backtick commands via \s-1PERL5SHELL\s0.  See perlrun.
.Sp
Perl does not depend on the registry, but it can look up certain default
values if you choose to put them there.  Perl attempts to read entries from
\&\f(CW\*(C`HKEY_CURRENT_USER\eSoftware\ePerl\*(C'\fR and \f(CW\*(C`HKEY_LOCAL_MACHINE\eSoftware\ePerl\*(C'\fR.
Entries in the former override entries in the latter.  One or more of the
following entries (of type \s-1REG_SZ\s0 or \s-1REG_EXPAND_SZ\s0) may be set:
.Sp
.Vb 7
\&    lib-$]              version-specific standard library path to add to @INC
\&    lib                 standard library path to add to @INC
\&    sitelib-$]          version-specific site library path to add to @INC
\&    sitelib             site library path to add to @INC
\&    vendorlib-$]        version-specific vendor library path to add to @INC
\&    vendorlib           vendor library path to add to @INC
\&    PERL*               fallback for all %ENV lookups that begin with "PERL"
.Ve
.Sp
Note the \f(CW$]\fR in the above is not literal.  Substitute whatever version
of perl you want to honor that entry, e.g. \f(CW5.6.0\fR.  Paths must be
separated with semicolons, as usual on win32.
.IP "File Globbing" 4
.IX Item "File Globbing"
By default, perl handles file globbing using the File::Glob extension,
which provides portable globbing.
.Sp
If you want perl to use globbing that emulates the quirks of \s-1DOS\s0
filename conventions, you might want to consider using File::DosGlob
to override the internal \fIglob()\fR implementation.  See File::DosGlob for
details.
.IP "Using perl from the command line" 4
.IX Item "Using perl from the command line"
If you are accustomed to using perl from various command-line
shells found in \s-1UNIX\s0 environments, you will be less than pleased
with what Windows offers by way of a command shell.
.Sp
The crucial thing to understand about the Windows environment is that
the command line you type in is processed twice before Perl sees it.
First, your command shell (usually \s-1CMD\s0.EXE on Windows \s-1NT\s0, and
\&\s-1COMMAND\s0.COM on Windows 9x) preprocesses the command line, to handle
redirection, environment variable expansion, and location of the
executable to run. Then, the perl executable splits the remaining
command line into individual arguments, using the C runtime library
upon which Perl was built.
.Sp
It is particularly important to note that neither the shell nor the C
runtime do any wildcard expansions of command-line arguments (so
wildcards need not be quoted).  Also, the quoting behaviours of the
shell and the C runtime are rudimentary at best (and may, if you are
using a non-standard shell, be inconsistent).  The only (useful) quote
character is the double quote (").  It can be used to protect spaces
and other special characters in arguments.
.Sp
The Windows \s-1NT\s0 documentation has almost no description of how the
quoting rules are implemented, but here are some general observations
based on experiments: The C runtime breaks arguments at spaces and
passes them to programs in argc/argv.  Double quotes can be used to
prevent arguments with spaces in them from being split up.  You can
put a double quote in an argument by escaping it with a backslash and
enclosing the whole argument within double quotes.  The backslash and
the pair of double quotes surrounding the argument will be stripped by
the C runtime.
.Sp
The file redirection characters "<\*(L", \*(R">\*(L", and \*(R"|\*(L" can be quoted by
double quotes (although there are suggestions that this may not always
be true).  Single quotes are not treated as quotes by the shell or
the C runtime, they don't get stripped by the shell (just to make
this type of quoting completely useless).  The caret \*(R"^" has also
been observed to behave as a quoting character, but this appears
to be a shell feature, and the caret is not stripped from the command
line, so Perl still sees it (and the C runtime phase does not treat
the caret as a quote character).
.Sp
Here are some examples of usage of the \*(L"cmd\*(R" shell:
.Sp
This prints two doublequotes:
.Sp
.Vb 1
\&    perl -e "print '\e"\e"' "
.Ve
.Sp
This does the same:
.Sp
.Vb 1
\&    perl -e "print \e"\e\e\e"\e\e\e"\e" "
.Ve
.Sp
This prints \*(L"bar\*(R" and writes \*(L"foo\*(R" to the file \*(L"blurch\*(R":
.Sp
.Vb 1
\&    perl -e "print 'foo'; print STDERR 'bar'" > blurch
.Ve
.Sp
This prints \*(L"foo\*(R" (\*(L"bar\*(R" disappears into nowhereland):
.Sp
.Vb 1
\&    perl -e "print 'foo'; print STDERR 'bar'" 2> nul
.Ve
.Sp
This prints \*(L"bar\*(R" and writes \*(L"foo\*(R" into the file \*(L"blurch\*(R":
.Sp
.Vb 1
\&    perl -e "print 'foo'; print STDERR 'bar'" 1> blurch
.Ve
.Sp
This pipes \*(L"foo\*(R" to the \*(L"less\*(R" pager and prints \*(L"bar\*(R" on the console:
.Sp
.Vb 1
\&    perl -e "print 'foo'; print STDERR 'bar'" | less
.Ve
.Sp
This pipes \*(L"foo\enbar\en\*(R" to the less pager:
.Sp
.Vb 1
\&    perl -le "print 'foo'; print STDERR 'bar'" 2>&1 | less
.Ve
.Sp
This pipes \*(L"foo\*(R" to the pager and writes \*(L"bar\*(R" in the file \*(L"blurch\*(R":
.Sp
.Vb 1
\&    perl -e "print 'foo'; print STDERR 'bar'" 2> blurch | less
.Ve
.Sp
Discovering the usefulness of the \*(L"command.com\*(R" shell on Windows 9x
is left as an exercise to the reader :)
.Sp
One particularly pernicious problem with the 4NT command shell for
Windows \s-1NT\s0 is that it (nearly) always treats a % character as indicating
that environment variable expansion is needed.  Under this shell, it is
therefore important to always double any % characters which you want
Perl to see (for example, for hash variables), even when they are
quoted.
.IP "Building Extensions" 4
.IX Item "Building Extensions"
The Comprehensive Perl Archive Network (\s-1CPAN\s0) offers a wealth
of extensions, some of which require a C compiler to build.
Look in http://www.cpan.org/ for more information on \s-1CPAN\s0.
.Sp
Note that not all of the extensions available from \s-1CPAN\s0 may work
in the Win32 environment; you should check the information at
http://testers.cpan.org/ before investing too much effort into
porting modules that don't readily build.
.Sp
Most extensions (whether they require a C compiler or not) can
be built, tested and installed with the standard mantra:
.Sp
.Vb 4
\&    perl Makefile.PL
\&    $MAKE
\&    $MAKE test
\&    $MAKE install
.Ve
.Sp
where \f(CW$MAKE\fR is whatever 'make' program you have configured perl to
use.  Use \*(L"perl \-V:make\*(R" to find out what this is.  Some extensions
may not provide a testsuite (so \*(L"$MAKE test\*(R" may not do anything or
fail), but most serious ones do.
.Sp
It is important that you use a supported 'make' program, and
ensure Config.pm knows about it.  If you don't have nmake, you can
either get dmake from the location mentioned earlier or get an
old version of nmake reportedly available from:
.Sp
.Vb 1
\& http://download.microsoft.com/download/vc15/Patch/1.52/W95/EN-US/nmake15.exe
.Ve
.Sp
Another option is to use the make written in Perl, available from
\&\s-1CPAN\s0.
.Sp
.Vb 1
\&    http://www.cpan.org/modules/by-module/Make/
.Ve
.Sp
You may also use dmake.  See \*(L"Make\*(R" above on how to get it.
.Sp
Note that MakeMaker actually emits makefiles with different syntax
depending on what 'make' it thinks you are using.  Therefore, it is
important that one of the following values appears in Config.pm:
.Sp
.Vb 4
\&    make='nmake'        # MakeMaker emits nmake syntax
\&    make='dmake'        # MakeMaker emits dmake syntax
\&    any other value     # MakeMaker emits generic make syntax
\&                            (e.g GNU make, or Perl make)
.Ve
.Sp
If the value doesn't match the 'make' program you want to use,
edit Config.pm to fix it.
.Sp
If a module implements XSUBs, you will need one of the supported
C compilers.  You must make sure you have set up the environment for
the compiler for command-line compilation.
.Sp
If a module does not build for some reason, look carefully for
why it failed, and report problems to the module author.  If
it looks like the extension building support is at fault, report
that with full details of how the build failed using the perlbug
utility.
.IP "Command-line Wildcard Expansion" 4
.IX Item "Command-line Wildcard Expansion"
The default command shells on \s-1DOS\s0 descendant operating systems (such
as they are) usually do not expand wildcard arguments supplied to
programs.  They consider it the application's job to handle that.
This is commonly achieved by linking the application (in our case,
perl) with startup code that the C runtime libraries usually provide.
However, doing that results in incompatible perl versions (since the
behavior of the argv expansion code differs depending on the
compiler, and it is even buggy on some compilers).  Besides, it may
be a source of frustration if you use such a perl binary with an
alternate shell that *does* expand wildcards.
.Sp
Instead, the following solution works rather well. The nice things
about it are 1) you can start using it right away; 2) it is more
powerful, because it will do the right thing with a pattern like
*/*/*.c; 3) you can decide whether you do/don't want to use it; and
4) you can extend the method to add any customizations (or even
entirely different kinds of wildcard expansion).
.Sp
.Vb 20
\&        C:\e> copy con c:\eperl\elib\eWild.pm
\&        # Wild.pm - emulate shell @ARGV expansion on shells that don't
\&        use File::DosGlob;
\&        @ARGV = map {
\&                      my @g = File::DosGlob::glob($_) if /[*?]/;
\&                      @g ? @g : $_;
\&                    } @ARGV;
\&        1;
\&        ^Z
\&        C:\e> set PERL5OPT=-MWild
\&        C:\e> perl -le "for (@ARGV) { print }" */*/perl*.c
\&        p4view/perl/perl.c
\&        p4view/perl/perlio.c
\&        p4view/perl/perly.c
\&        perl5.005/win32/perlglob.c
\&        perl5.005/win32/perllib.c
\&        perl5.005/win32/perlglob.c
\&        perl5.005/win32/perllib.c
\&        perl5.005/win32/perlglob.c
\&        perl5.005/win32/perllib.c
.Ve
.Sp
Note there are two distinct steps there: 1) You'll have to create
Wild.pm and put it in your perl lib directory. 2) You'll need to
set the \s-1PERL5OPT\s0 environment variable.  If you want argv expansion
to be the default, just set \s-1PERL5OPT\s0 in your default startup
environment.
.Sp
If you are using the Visual C compiler, you can get the C runtime's
command line wildcard expansion built into perl binary.  The resulting
binary will always expand unquoted command lines, which may not be
what you want if you use a shell that does that for you.  The expansion
done is also somewhat less powerful than the approach suggested above.
.IP "Win32 Specific Extensions" 4
.IX Item "Win32 Specific Extensions"
A number of extensions specific to the Win32 platform are available
from \s-1CPAN\s0.  You may find that many of these extensions are meant to
be used under the Activeware port of Perl, which used to be the only
native port for the Win32 platform.  Since the Activeware port does not
have adequate support for Perl's extension building tools, these
extensions typically do not support those tools either and, therefore,
cannot be built using the generic steps shown in the previous section.
.Sp
To ensure smooth transitioning of existing code that uses the
ActiveState port, there is a bundle of Win32 extensions that contains
all of the ActiveState extensions and several other Win32 extensions from
\&\s-1CPAN\s0 in source form, along with many added bugfixes, and with MakeMaker
support.  The latest version of this bundle is available at:
.Sp
.Vb 1
\&    http://search.cpan.org/dist/libwin32/
.Ve
.Sp
See the \s-1README\s0 in that distribution for building and installation
instructions.
.IP "Notes on 64\-bit Windows" 4
.IX Item "Notes on 64-bit Windows"
Windows .NET Server supports the \s-1LLP64\s0 data model on the Intel Itanium
architecture.
.Sp
The \s-1LLP64\s0 data model is different from the \s-1LP64\s0 data model that is the
norm on 64\-bit Unix platforms.  In the former, \f(CW\*(C`int\*(C'\fR and \f(CW\*(C`long\*(C'\fR are
both 32\-bit data types, while pointers are 64 bits wide.  In addition,
there is a separate 64\-bit wide integral type, \f(CW\*(C`_\|_int64\*(C'\fR.  In contrast,
the \s-1LP64\s0 data model that is pervasive on Unix platforms provides \f(CW\*(C`int\*(C'\fR
as the 32\-bit type, while both the \f(CW\*(C`long\*(C'\fR type and pointers are of
64\-bit precision.  Note that both models provide for 64\-bits of
addressability.
.Sp
64\-bit Windows running on Itanium is capable of running 32\-bit x86
binaries transparently.  This means that you could use a 32\-bit build
of Perl on a 64\-bit system.  Given this, why would one want to build
a 64\-bit build of Perl?  Here are some reasons why you would bother:
.RS 4
.IP "*" 4
A 64\-bit native application will run much more efficiently on
Itanium hardware.
.IP "*" 4
There is no 2GB limit on process size.
.IP "*" 4
Perl automatically provides large file support when built under
64\-bit Windows.
.IP "*" 4
Embedding Perl inside a 64\-bit application.
.RE
.RS 4
.RE
.Sh "Running Perl Scripts"
.IX Subsection "Running Perl Scripts"
Perl scripts on \s-1UNIX\s0 use the \*(L"#!\*(R" (a.k.a \*(L"shebang\*(R") line to
indicate to the \s-1OS\s0 that it should execute the file using perl.
Win32 has no comparable means to indicate arbitrary files are
executables.
.PP
Instead, all available methods to execute plain text files on
Win32 rely on the file \*(L"extension\*(R".  There are three methods
to use this to execute perl scripts:
.IP "1" 8
.IX Item "1"
There is a facility called \*(L"file extension associations\*(R" that will
work in Windows \s-1NT\s0 4.0.  This can be manipulated via the two
commands \*(L"assoc\*(R" and \*(L"ftype\*(R" that come standard with Windows \s-1NT\s0
4.0.  Type \*(L"ftype /?\*(R" for a complete example of how to set this
up for perl scripts (Say what?  You thought Windows \s-1NT\s0 wasn't
perl\-ready? :).
.IP "2" 8
.IX Item "2"
Since file associations don't work everywhere, and there are
reportedly bugs with file associations where it does work, the
old method of wrapping the perl script to make it look like a
regular batch file to the \s-1OS\s0, may be used.  The install process
makes available the \*(L"pl2bat.bat\*(R" script which can be used to wrap
perl scripts into batch files.  For example:
.Sp
.Vb 1
\&        pl2bat foo.pl
.Ve
.Sp
will create the file \*(L"\s-1FOO\s0.BAT\*(R".  Note \*(L"pl2bat\*(R" strips any
\&.pl suffix and adds a .bat suffix to the generated file.
.Sp
If you use the 4DOS/NT or similar command shell, note that
\&\*(L"pl2bat\*(R" uses the \*(L"%*\*(R" variable in the generated batch file to
refer to all the command line arguments, so you may need to make
sure that construct works in batch files.  As of this writing,
4DOS/NT users will need a \*(L"ParameterChar = *\*(R" statement in their
4NT.INI file or will need to execute \*(L"setdos /p*\*(R" in the 4DOS/NT
startup file to enable this to work.
.IP "3" 8
.IX Item "3"
Using \*(L"pl2bat\*(R" has a few problems:  the file name gets changed,
so scripts that rely on \f(CW$0\fR to find what they must do may not
run properly; running \*(L"pl2bat\*(R" replicates the contents of the
original script, and so this process can be maintenance intensive
if the originals get updated often.  A different approach that
avoids both problems is possible.
.Sp
A script called \*(L"runperl.bat\*(R" is available that can be copied
to any filename (along with the .bat suffix).  For example,
if you call it \*(L"foo.bat\*(R", it will run the file \*(L"foo\*(R" when it is
executed.  Since you can run batch files on Win32 platforms simply
by typing the name (without the extension), this effectively
runs the file \*(L"foo\*(R", when you type either \*(L"foo\*(R" or \*(L"foo.bat\*(R".
With this method, \*(L"foo.bat\*(R" can even be in a different location
than the file \*(L"foo\*(R", as long as \*(L"foo\*(R" is available somewhere on
the \s-1PATH\s0.  If your scripts are on a filesystem that allows symbolic
links, you can even avoid copying \*(L"runperl.bat\*(R".
.Sp
Here's a diversion:  copy \*(L"runperl.bat\*(R" to \*(L"runperl\*(R", and type
\&\*(L"runperl\*(R".  Explain the observed behavior, or lack thereof. :)
Hint: .gnidnats llits er'uoy fi ,\*(L"lrepnur\*(R" eteled :tniH
.Sh "Miscellaneous Things"
.IX Subsection "Miscellaneous Things"
A full set of \s-1HTML\s0 documentation is installed, so you should be
able to use it if you have a web browser installed on your
system.
.PP
\&\f(CW\*(C`perldoc\*(C'\fR is also a useful tool for browsing information contained
in the documentation, especially in conjunction with a pager
like \f(CW\*(C`less\*(C'\fR (recent versions of which have Win32 support).  You may
have to set the \s-1PAGER\s0 environment variable to use a specific pager.
\&\*(L"perldoc \-f foo\*(R" will print information about the perl operator
\&\*(L"foo\*(R".
.PP
One common mistake when using this port with a \s-1GUI\s0 library like \f(CW\*(C`Tk\*(C'\fR
is assuming that Perl's normal behavior of opening a command-line
window will go away.  This isn't the case.  If you want to start a copy
of \f(CW\*(C`perl\*(C'\fR without opening a command-line window, use the \f(CW\*(C`wperl\*(C'\fR
executable built during the installation process.  Usage is exactly
the same as normal \f(CW\*(C`perl\*(C'\fR on Win32, except that options like \f(CW\*(C`\-h\*(C'\fR
don't work (since they need a command-line window to print to).
.PP
If you find bugs in perl, you can run \f(CW\*(C`perlbug\*(C'\fR to create a
bug report (you may have to send it manually if \f(CW\*(C`perlbug\*(C'\fR cannot
find a mailer on your system).
.SH "BUGS AND CAVEATS"
.IX Header "BUGS AND CAVEATS"
Norton AntiVirus interferes with the build process, particularly if
set to \*(L"AutoProtect, All Files, when Opened\*(R". Unlike large applications
the perl build process opens and modifies a lot of files. Having the
the AntiVirus scan each and every one slows build the process significantly.
Worse, with PERLIO=stdio the build process fails with peculiar messages
as the virus checker interacts badly with miniperl.exe writing configure
files (it seems to either catch file part written and treat it as suspicious,
or virus checker may have it \*(L"locked\*(R" in a way which inhibits miniperl
updating it). The build does complete with
.PP
.Vb 1
\&   set PERLIO=perlio
.Ve
.PP
but that may be just luck. Other AntiVirus software may have similar issues.
.PP
Some of the built-in functions do not act exactly as documented in
perlfunc, and a few are not implemented at all.  To avoid
surprises, particularly if you have had prior exposure to Perl
in other operating environments or if you intend to write code
that will be portable to other environments, see perlport
for a reasonably definitive list of these differences.
.PP
Not all extensions available from \s-1CPAN\s0 may build or work properly
in the Win32 environment.  See \*(L"Building Extensions\*(R".
.PP
Most \f(CW\*(C`socket()\*(C'\fR related calls are supported, but they may not
behave as on Unix platforms.  See perlport for the full list.
Perl requires Winsock2 to be installed on the system. If you're
running Win95, you can download Winsock upgrade from here:
.PP
http://www.microsoft.com/windows95/downloads/contents/WUAdminTools/S_WUNetworkingTools/W95Sockets2/Default.asp
.PP
Later \s-1OS\s0 versions already include Winsock2 support.
.PP
Signal handling may not behave as on Unix platforms (where it
doesn't exactly \*(L"behave\*(R", either :).  For instance, calling \f(CW\*(C`die()\*(C'\fR
or \f(CW\*(C`exit()\*(C'\fR from signal handlers will cause an exception, since most
implementations of \f(CW\*(C`signal()\*(C'\fR on Win32 are severely crippled.
Thus, signals may work only for simple things like setting a flag
variable in the handler.  Using signals under this port should
currently be considered unsupported.
.PP
Please send detailed descriptions of any problems and solutions that
you may find to <\fIperlbug@perl.org\fR>, along with the output
produced by \f(CW\*(C`perl \-V\*(C'\fR.
.SH "ACKNOWLEDGEMENTS"
.IX Header "ACKNOWLEDGEMENTS"
The use of a camel with the topic of Perl is a trademark
of O'Reilly and Associates, Inc. Used with permission.
.SH "AUTHORS"
.IX Header "AUTHORS"
.IP "Gary Ng <71564.1743@CompuServe.COM>" 4
.IX Item "Gary Ng <71564.1743@CompuServe.COM>"
.PD 0
.IP "Gurusamy Sarathy <gsar@activestate.com>" 4
.IX Item "Gurusamy Sarathy <gsar@activestate.com>"
.IP "Nick Ing-Simmons <nick@ing\-simmons.net>" 4
.IX Item "Nick Ing-Simmons <nick@ing-simmons.net>"
.IP "Jan Dubois <jand@activestate.com>" 4
.IX Item "Jan Dubois <jand@activestate.com>"
.IP "Steve Hay <steve.hay@uk.radan.com>" 4
.IX Item "Steve Hay <steve.hay@uk.radan.com>"
.PD
.PP
This document is maintained by Jan Dubois.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
perl
.SH "HISTORY"
.IX Header "HISTORY"
This port was originally contributed by Gary Ng around 5.003_24,
and borrowed from the Hip Communications port that was available
at the time.  Various people have made numerous and sundry hacks
since then.
.PP
Borland support was added in 5.004_01 (Gurusamy Sarathy).
.PP
GCC/mingw32 support was added in 5.005 (Nick Ing\-Simmons).
.PP
Support for \s-1PERL_OBJECT\s0 was added in 5.005 (ActiveState Tool Corp).
.PP
Support for \fIfork()\fR emulation was added in 5.6 (ActiveState Tool Corp).
.PP
Win9x support was added in 5.6 (Benjamin Stuhl).
.PP
Support for 64\-bit Windows added in 5.8 (ActiveState Corp).
.PP
Last updated: 30 September 2005
