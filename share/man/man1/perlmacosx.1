.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "PERLMACOSX 1"
.TH PERLMACOSX 1 "2006-01-07" "perl v5.8.8" "Perl Programmers Reference Guide"
.SH "NAME"
README.macosx \- Perl under Mac OS X
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
This document briefly describes perl under Mac \s-1OS\s0 X.
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The latest Perl release (5.8.8 as of this writing) builds without changes
under Mac \s-1OS\s0 X. Under 10.3 \*(L"Panther\*(R" and newer \s-1OS\s0 versions, all self-tests
pass, and all standard features are supported.
.PP
Earlier Mac \s-1OS\s0 X releases (10.2 \*(L"Jaguar\*(R" and older) did not include a
completely thread-safe libc, so threading is not fully supported. Also,
earlier releases included a buggy libdb, so some of the DB_File tests
are known to fail on those releases.
.Sh "Installation Prefix"
.IX Subsection "Installation Prefix"
The default installation location for this release uses the traditional
\&\s-1UNIX\s0 directory layout under /usr/local. This is the recommended location
for most users, and will leave the Apple-supplied Perl and its modules
undisturbed.
.PP
Using an installation prefix of '/usr' will result in a directory layout
that mirrors that of Apple's default Perl, with core modules stored in
\&'/System/Library/Perl/${version}', \s-1CPAN\s0 modules stored in
\&'/Library/Perl/${version}', and the addition of
\&'/Network/Library/Perl/${version}' to \f(CW@INC\fR for modules that are stored
on a file server and used by many Macs.
.Sh "\s-1SDK\s0 support"
.IX Subsection "SDK support"
First, export the path to the \s-1SDK\s0 into the build environment:
.PP
.Vb 1
\&    export SDK=/Developer/SDKs/MacOSX10.3.9.sdk
.Ve
.PP
Use an \s-1SDK\s0 by exporting some additions to Perl's 'ccflags' and '..flags'
config variables:
.PP
.Vb 5
\&    ./Configure -Accflags="-nostdinc -B$SDK/usr/include/gcc \e
\&                           -B$SDK/usr/lib/gcc -isystem$SDK/usr/include \e
\&                           -F$SDK/System/Library/Frameworks" \e
\&                -Aldflags="-Wl,-syslibroot,$SDK" \e
\&                -de
.Ve
.Sh "Universal Binary support"
.IX Subsection "Universal Binary support"
To compile perl as a universal binary (built for both ppc and intel), export
the \s-1SDK\s0 variable as above, selecting the 10.4u \s-1SDK:\s0
.PP
.Vb 1
\&    export SDK=/Developer/SDKs/MacOSX10.4u.sdk
.Ve
.PP
In addition to the compiler flags used to select the \s-1SDK\s0, also add the flags
for creating a universal binary:
.PP
.Vb 5
\&    ./Configure -Accflags="-arch i686 -arch ppc -nostdinc -B$SDK/usr/include/gcc \e
\&                           -B$SDK/usr/lib/gcc -isystem$SDK/usr/include \e
\&                           -F$SDK/System/Library/Frameworks" \e
\&                -Aldflags="-arch i686 -arch ppc -Wl,-syslibroot,$SDK" \e
\&                -de
.Ve
.PP
Keep in mind that these compiler and linker settings will also be used when
building \s-1CPAN\s0 modules. For \s-1XS\s0 modules to be compiled as a universal binary, any
libraries it links to must also be universal binaries. The system libraries that
Apple includes with the 10.4u \s-1SDK\s0 are all universal, but user-installed libraries
may need to be re-installed as universal binaries.
.Sh "libperl and Prebinding"
.IX Subsection "libperl and Prebinding"
Mac \s-1OS\s0 X ships with a dynamically-loaded libperl, but the default for
this release is to compile a static libperl. The reason for this is
pre\-binding. Dynamic libraries can be pre-bound to a specific address in
memory in order to decrease load time. To do this, one needs to be aware
of the location and size of all previously-loaded libraries. Apple
collects this information as part of their overall \s-1OS\s0 build process, and
thus has easy access to it when building Perl, but ordinary users would
need to go to a great deal of effort to obtain the information needed
for pre\-binding.
.PP
You can override the default and build a shared libperl if you wish
(Configure\ ...\ \-Duseshrlib), but the load time on pre\-10.4 \s-1OS\s0
releases will be greater than either the static library, or Apple's
pre-bound dynamic library.
.PP
With 10.4 \*(L"Tiger\*(R" and newer, Apple has all but eliminated the performance
penalty for non-prebound libraries.
.Sh "Updating Apple's Perl"
.IX Subsection "Updating Apple's Perl"
In a word \- don't, at least without a *very* good reason. Your scripts
can just as easily begin with \*(L"#!/usr/local/bin/perl\*(R" as with
\&\*(L"#!/usr/bin/perl\*(R". Scripts supplied by Apple and other third parties as
part of installation packages and such have generally only been tested
with the /usr/bin/perl that's installed by Apple.
.PP
If you find that you do need to update the system Perl, one issue worth
keeping in mind is the question of static vs. dynamic libraries. If you
upgrade using the default static libperl, you will find that the dynamic
libperl supplied by Apple will not be deleted. If both libraries are
present when an application that links against libperl is built, ld will
link against the dynamic library by default. So, if you need to replace
Apple's dynamic libperl with a static libperl, you need to be sure to
delete the older dynamic library after you've installed the update.
.Sh "Known problems"
.IX Subsection "Known problems"
If you have installed extra libraries such as \s-1GDBM\s0 through Fink
(in other words, you have libraries under \fI/sw/lib\fR), or libdlcompat
to \fI/usr/local/lib\fR, you may need to be extra careful when running
Configure to not to confuse Configure and Perl about which libraries
to use.  Being confused will show up for example as \*(L"dyld\*(R" errors about
symbol problems, for example during \*(L"make test\*(R". The safest bet is to run
Configure as
.PP
.Vb 1
\&    Configure ... -Uloclibpth -Dlibpth=/usr/lib
.Ve
.PP
to make Configure look only into the system libraries.  If you have some
extra library directories that you really want to use (such as newer
Berkeley \s-1DB\s0 libraries in pre-Panther systems), add those to the libpth:
.PP
.Vb 1
\&    Configure ... -Uloclibpth -Dlibpth='/usr/lib /opt/lib'
.Ve
.PP
The default of building Perl statically may cause problems with complex
applications like Tk: in that case consider building shared Perl
.PP
.Vb 1
\&    Configure ... -Duseshrplib
.Ve
.PP
but remember that there's a startup cost to pay in that case (see above
\&\*(L"libperl and Prebinding\*(R").
.PP
Starting with Tiger (Mac \s-1OS\s0 X 10.4), Apple shipped broken locale files for
the eu_ES locale (Basque\-Spain).  In previous releases of Perl, this resulted in
failures in the \f(CW\*(C`lib/locale\*(C'\fR test. These failures have been supressed
in the current release of Perl by making the test ignore the broken locale.
If you need to use the eu_ES locale, you should contact Apple support.
.Sh "MacPerl"
.IX Subsection "MacPerl"
Quite a bit has been written about MacPerl, the Perl distribution for
\&\*(L"Classic MacOS\*(R" \- that is, versions 9 and earlier of MacOS. Because it
runs in environment that's very different from that of \s-1UNIX\s0, many things
are done differently in MacPerl. Modules are installed using a different
procedure, Perl itself is built differently, path names are different,
etc.
.PP
From the perspective of a Perl programmer, Mac \s-1OS\s0 X is more like a
traditional \s-1UNIX\s0 than Classic MacOS. If you find documentation that
refers to a special procedure that's needed for MacOS that's drastically
different from the instructions provided for \s-1UNIX\s0, the MacOS
instructions are quite often intended for MacPerl on Classic MacOS. In
that case, the correct procedure on Mac \s-1OS\s0 X is usually to follow the
\&\s-1UNIX\s0 instructions, rather than the MacPerl instructions.
.Sh "Carbon"
.IX Subsection "Carbon"
MacPerl ships with a number of modules that are used to access the
classic MacOS toolbox. Many of these modules have been updated to use
Mac \s-1OS\s0 X's newer \*(L"Carbon\*(R" toolbox, and are available from \s-1CPAN\s0 in the
\&\*(L"Mac::Carbon\*(R" module.
.Sh "Cocoa"
.IX Subsection "Cocoa"
There are two ways to use Cocoa from Perl. Apple's PerlObjCBridge
module, included with Mac \s-1OS\s0 X, can be used by standalone scripts to
access Foundation (i.e. non\-GUI) classes and objects.
.PP
An alternative is CamelBones, a framework that allows access to both
Foundation and AppKit classes and objects, so that full \s-1GUI\s0 applications
can be built in Perl. CamelBones can be found on SourceForge, at
<http://www.sourceforge.net/projects/camelbones/>.
.SH "Starting From Scratch"
.IX Header "Starting From Scratch"
Unfortunately it is not that difficult somehow manage to break one's
Mac \s-1OS\s0 X Perl rather severely.  If all else fails and you want to
really, \fB\s-1REALLY\s0\fR, start from scratch and remove even your Apple Perl
installation (which has become corrupted somehow), the following
instructions should do it.  \fBPlease think twice before following
these instructions: they are much like conducting brain surgery to
yourself.  Without anesthesia.\fR  We will \fBnot\fR come to fix your system
if you do this.
.PP
First, get rid of the libperl.dylib:
.PP
.Vb 2
\&    # cd /System/Library/Perl/darwin/CORE
\&    # rm libperl.dylib
.Ve
.PP
Then delete every .bundle file found anywhere in the folders:
.PP
.Vb 2
\&    /System/Library/Perl
\&    /Library/Perl
.Ve
.PP
You can find them for example by
.PP
.Vb 1
\&    # find /System/Library/Perl /Library/Perl -name '*.bundle' -print
.Ve
.PP
After this you can either copy Perl from your operating system media
(you will need at least the /System/Library/Perl and /usr/bin/perl),
or rebuild Perl from the source code with \f(CW\*(C`Configure \-Dprefix=/usr
\&\-Dusershrplib\*(C'\fR \s-1NOTE:\s0 the \f(CW\*(C`\-Dprefix=/usr\*(C'\fR to replace the system Perl
works much better with Perl 5.8.1 and later, in Perl 5.8.0 the
settings were not quite right.
.PP
\&\*(L"Pacifist\*(R" from CharlesSoft (<http://www.charlessoft.com/>) is a nice
way to extract the Perl binaries from the \s-1OS\s0 media, without having to
reinstall the entire \s-1OS\s0.
.SH "AUTHOR"
.IX Header "AUTHOR"
This \s-1README\s0 was written by Sherm Pendley <sherm@dot\-app.org>,
and subsequently updated by Dominic Dunlop <domo@computer.org>.
The \*(L"Starting From Scratch\*(R" recipe was contributed by John Montbriand
<montbriand@apple.com>.
.SH "DATE"
.IX Header "DATE"
Last modified 2005\-11\-07.
