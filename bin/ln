#!/bin/sh
# github.com/dansmith65/git/blob/master/contrib/workdir/git-new-workdir-win
# stackoverflow.com/questions/8409024
#
# TESTS
# ln "/c/a/git.exe" "/c/a/git-add.exe"
# ln -s "/c/a/b" "/c/a/b-link"
# ln -s "/c/a/git git.exe" "/c/a/git git-add.exe"
# ln -s "/c/a/git.exe" "$HOME/git-add.exe"
# ln -s "/c/a/git.exe" "/c/a/git-add.exe"
# ln -s "C:\a\git.exe" "C:\a\git-add.exe"

for i in 0 1
do
	arg="${BASH_ARGV[$i]}"
	dn=$(cd "$(dirname "$arg")"; pwd -W)
	bn=$(basename "$arg")
	paths+="\"$dn/$bn\" "
done

if test -d "$2"
	then is_dir='/d'
fi

# ".exe" is required
cmd.exe /c "mklink $is_dir $paths"